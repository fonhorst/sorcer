import java.net.URL;
import org.jini.rio.boot.BootUtil;
import org.jini.rio.boot.RioActivatableServiceDescriptor;
import com.sun.jini.start.SharedActivationGroupDescriptor;
import com.sun.jini.start.ServiceDescriptor;

com.sun.jini.start {
    /* Configure the codebase */
    static port = "9000";
    static policy = "${RIO_HOME}${/}policy${/}sorcer.policy";    
    static groupCodebase = BootUtil.getCodebase("group-dl.jar", port);
    static groupClasspath = BootUtil.getClasspath(new String[] {
                                               "${RIO_HOME}${/}lib${/}boot.jar",
                                               "${JINI_HOME}${/}lib${/}start.jar"
                                         });    
    static groupPersistenceDirectory = "${RIO_LOG_DIR}${/}sharedvm.log"; 

    /* System properties for the activation group */
    sysProperties = new String[] {
        "JINI_HOME", "${JINI_HOME}",
        "RIO_HOME", "${RIO_HOME}",
        "RIO_LOG_DIR", "${RIO_LOG_DIR}",
        "java.protocol.handler.pkgs", "net.jini.url"
    };

    /* Cybernode configuration attributes */
    static cybernodeClasspath = "${RIO_HOME}${/}lib${/}cybernode.jar";
    static cybernodeCodebase = BootUtil.getCodebase(new String[] {
                                                       "cybernode-dl.jar", 
                                                       "rio-dl.jar",
                                                       "platform-capabilities.jar"},
                                                    port);                                                          
    static cybernodeConfig = "${RIO_HOME}${/}configs${/}activatable-cybernode.config";

    static serviceDescriptors = new ServiceDescriptor[] {        

        new SharedActivationGroupDescriptor(policy, 
                                            groupClasspath, 
                                            groupPersistenceDirectory,
                                            null,         /* serverCommand */
                                            null,         /* serverOptions */
                                            sysProperties /* serverProperties */),        

        /* Rio Cybernode */
        new RioActivatableServiceDescriptor(cybernodeCodebase,
                                            policy,
                                            cybernodeClasspath,
                                            "org.jini.rio.cybernode.CybernodeImpl",
                                            groupPersistenceDirectory,
                                            new String[] {cybernodeConfig},
                                            true)         /* restart */
    };
}

/* Declare Common JARs to load */
org.jini.rio.boot {
    commonJARs = new URL[] {
        BootUtil.fileToURL("${RIO_HOME}${/}lib${/}rio.jar"),
        BootUtil.fileToURL("${RIO_HOME}${/}lib${/}platform-capabilities.jar")        
    };
}
