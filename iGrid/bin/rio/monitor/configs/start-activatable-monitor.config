import org.jini.rio.boot.BootUtil;
import org.jini.rio.boot.RioActivatableServiceDescriptor;
import com.sun.jini.start.SharedActivatableServiceDescriptor;
import com.sun.jini.start.SharedActivationGroupDescriptor;
import com.sun.jini.start.ServiceDescriptor;

com.sun.jini.start {
    /* Configure the codebase */
    static port = "9000";
    static policy = "${RIO_HOME}${/}policy${/}policy.all";    

    /* Configure the SharedGroup attributes */
    static groupCodebase = BootUtil.getCodebase("group-dl.jar", port);

    static groupClasspath = "${RIO_HOME}${/}lib${/}boot.jar";
    static groupPersistenceDirectory = "${RIO_LOG_DIR}${/}sharedvm.log"; 

    /* System properties for the activation group */
    sysProperties = new String[] {
        "JINI_HOME", "${JINI_HOME}",
        "RIO_HOME", "${RIO_HOME}",
        "RIO_LOG_DIR", "${RIO_LOG_DIR}",
        "java.protocol.handler.pkgs", "net.jini.url"
    };    

    static reggieCodebase = BootUtil.getCodebase("reggie-dl.jar", port);
    static reggieClasspath = "${JINI_HOME}${/}lib${/}reggie.jar";
    static reggieConfig = "${RIO_HOME}${/}configs${/}activatable-reggie.config";    

    static monitorCodebase = BootUtil.getCodebase(new String[] {
                                                       "monitor-dl.jar", 
                                                       "rio-dl.jar"},
                                                    port);    
    static monitorClasspath = "${RIO_HOME}${/}lib${/}monitor.jar";
    static monitorConfig = "${RIO_HOME}${/}configs${/}activatable-monitor.config";

    static serviceDescriptors = new ServiceDescriptor[] {
    
        new SharedActivationGroupDescriptor(policy, 
                                            groupClasspath, 
                                            groupPersistenceDirectory,
                                            null,         /* serverCommand */
                                            null,         /* serverOptions */
                                            sysProperties /* serverProperties */),        

        /* Rio Provision Monitor */
        new RioActivatableServiceDescriptor(monitorCodebase,
                                            policy,
                                            monitorClasspath,
                                            "org.jini.rio.monitor.ProvisionMonitorImpl",
                                            groupPersistenceDirectory,
                                            new String[] {monitorConfig},
                                            true),        /* restart */
        

        /* Jini Lookup Service */
        new SharedActivatableServiceDescriptor(reggieCodebase,
                                               policy,
                                               reggieClasspath,
                                               "com.sun.jini.reggie.PersistentRegistrarImpl",
                                               groupPersistenceDirectory,
                                               new String[] {reggieConfig},
                                               true)      /* restart */
    };    

}

/* Declare Common JARs to load */   
org.jini.rio.boot {
    commonJARs = new URL[] {
        BootUtil.fileToURL("${RIO_HOME}${/}lib${/}rio.jar")
    };
}  
