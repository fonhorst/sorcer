<?xml version="1.0"?>
<project name="SOS kernel services" default="kernel" basedir=".">

	<import file="../bin/common-run.xml" />
	<target name="kernel" depends="clean, SOS" />
	<property name="sorcer.data" value="${sorcer.home}/data" />

	<target name="SOS">
		<java classname="sorcer.boot.ServiceStarter" fork="yes">
			<jvmarg value="-Djava.net.preferIPv4Stack=true" />
<!--		        <jvmarg value="-Xdebug"/>
			<jvmarg value="-Xrunjdwp:transport=dt_socket,server=y,address=8000"/>-->
			<classpath refid="boot.classpath"/>
			<arg value="../configs/boot-sorcer.config" />
            <sysproperty key="java.rmi.server.useCodebaseOnly" value="false" />
            <sysproperty key="java.protocol.handler.pkgs" value="net.jini.url|sorcer.util.bdb.sos" />
			<sysproperty key="sorcer.home" value="${sorcer.home}" />
			<env key="RIO_HOME" value="${rio.home}" />
			<sysproperty key="rio.home" value="${rio.home}" />
			<sysproperty key="java.security.policy" value="../configs/sorcer.policy" />
			<sysproperty key="webster.tmp.dir" value="${sorcer.data}" />
		</java>
	</target>

	<target name="clean" description="Delete database files">
		<delete dir="${sorcer.home}/logs/dbfiles_blitz" failonerror="false" />
		<delete dir="${sorcer.home}/logs/dbfiles_monitor" failonerror="false" />
		<delete file="${sorcer.home}/bin/monitoredjobs_index.obf" failonerror="false" />
		<delete file="${sorcer.home}/bin/monitoredjobs_temp.obf" failonerror="false" />
		<delete file="${sorcer.home}/bin/monitoredjobs.obf" failonerror="false" />
	</target>

</project>